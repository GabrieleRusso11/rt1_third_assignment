<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RT1_Third_Assignment: src/navigation_controller.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RT1_Third_Assignment
   </div>
   <div id="projectbrief">ROS package for the third assignment of the Research Track 1 course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">navigation_controller.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>the node that implements all the drive modalities of the robot (and more)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;ros/ros.h&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseAction.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseActionGoal.h&gt;</code><br />
<code>#include &lt;move_base_msgs/MoveBaseActionFeedback.h&gt;</code><br />
<code>#include &lt;actionlib/client/simple_action_client.h&gt;</code><br />
<code>#include &lt;sensor_msgs/LaserScan.h&gt;</code><br />
<code>#include &lt;actionlib_msgs/GoalID.h&gt;</code><br />
<code>#include &lt;rt1_third_assignment/Goal.h&gt;</code><br />
<code>#include &lt;rt1_third_assignment/Interface.h&gt;</code><br />
<code>#include &lt;geometry_msgs/Twist.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for navigation_controller.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="navigation__controller_8cpp__incl.png" border="0" usemap="#src_2navigation__controller_8cpp" alt=""/></div>
<map name="src_2navigation__controller_8cpp" id="src_2navigation__controller_8cpp">
<area shape="rect" title="the node that implements all the drive modalities of the robot (and more)" alt="" coords="907,5,1094,32"/>
<area shape="rect" title=" " alt="" coords="5,87,79,114"/>
<area shape="rect" title=" " alt="" coords="103,87,157,114"/>
<area shape="rect" title=" " alt="" coords="182,87,254,114"/>
<area shape="rect" title=" " alt="" coords="278,87,339,114"/>
<area shape="rect" title=" " alt="" coords="363,87,606,114"/>
<area shape="rect" title=" " alt="" coords="631,80,861,121"/>
<area shape="rect" title=" " alt="" coords="885,80,1116,121"/>
<area shape="rect" title=" " alt="" coords="1141,80,1287,121"/>
<area shape="rect" title=" " alt="" coords="1312,87,1489,114"/>
<area shape="rect" title=" " alt="" coords="1514,87,1679,114"/>
<area shape="rect" title=" " alt="" coords="1704,80,1847,121"/>
<area shape="rect" title=" " alt="" coords="1871,80,2013,121"/>
<area shape="rect" title=" " alt="" coords="2037,87,2199,114"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a21e20cc0b6656ae897b3cbb969b93241"><td class="memItemLeft" align="right" valign="top"><a id="a21e20cc0b6656ae897b3cbb969b93241"></a>
typedef actionlib::SimpleActionClient&lt; move_base_msgs::MoveBaseAction &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a21e20cc0b6656ae897b3cbb969b93241">MoveBaseClient</a></td></tr>
<tr class="memdesc:a21e20cc0b6656ae897b3cbb969b93241"><td class="mdescLeft">&#160;</td><td class="mdescRight">this line creates a convenience typedef for a SimpleActionClient that will allow us to communicate with actions that adhere to the MoveBaseAction action interface <br /></td></tr>
<tr class="separator:a21e20cc0b6656ae897b3cbb969b93241"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aad501e885a00d79c0dfbf28112af8fd9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#aad501e885a00d79c0dfbf28112af8fd9">interface</a> (rt1_third_assignment::Interface::Request &amp;req, rt1_third_assignment::Interface::Response &amp;res)</td></tr>
<tr class="memdesc:aad501e885a00d79c0dfbf28112af8fd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">interface function, used to compute the user commands  <a href="navigation__controller_8cpp.html#aad501e885a00d79c0dfbf28112af8fd9">More...</a><br /></td></tr>
<tr class="separator:aad501e885a00d79c0dfbf28112af8fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03814876eb117e8027ff880de6b63929"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a03814876eb117e8027ff880de6b63929">velCallback</a> (const geometry_msgs::Twist::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a03814876eb117e8027ff880de6b63929"><td class="mdescLeft">&#160;</td><td class="mdescRight">velCallback function, executed each time a new robot velocity is published from teleop  <a href="navigation__controller_8cpp.html#a03814876eb117e8027ff880de6b63929">More...</a><br /></td></tr>
<tr class="separator:a03814876eb117e8027ff880de6b63929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb11b81a819b0870f89687f4708d1e2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#afb11b81a819b0870f89687f4708d1e2a">robotPosition</a> (const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:afb11b81a819b0870f89687f4708d1e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">robotPosition function, used to obtain the updated robot position  <a href="navigation__controller_8cpp.html#afb11b81a819b0870f89687f4708d1e2a">More...</a><br /></td></tr>
<tr class="separator:afb11b81a819b0870f89687f4708d1e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5fa93e2808e6e8c2f8fe38e53d413ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ac5fa93e2808e6e8c2f8fe38e53d413ed">goalPosition</a> (rt1_third_assignment::Goal::Request &amp;req, rt1_third_assignment::Goal::Response &amp;res)</td></tr>
<tr class="memdesc:ac5fa93e2808e6e8c2f8fe38e53d413ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">goalPosition function, used to obtain the goal coordinates from the user interface  <a href="navigation__controller_8cpp.html#ac5fa93e2808e6e8c2f8fe38e53d413ed">More...</a><br /></td></tr>
<tr class="separator:ac5fa93e2808e6e8c2f8fe38e53d413ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a431f8bb04c3b06454f7b25bbebe2bed0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a431f8bb04c3b06454f7b25bbebe2bed0">min_right_side</a> (float *r)</td></tr>
<tr class="memdesc:a431f8bb04c3b06454f7b25bbebe2bed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">min_right_side function, used to obtain the minimum value of the right side ranges  <a href="navigation__controller_8cpp.html#a431f8bb04c3b06454f7b25bbebe2bed0">More...</a><br /></td></tr>
<tr class="separator:a431f8bb04c3b06454f7b25bbebe2bed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad45a8b389b8b1b726cfebe0a7acd2afa"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad45a8b389b8b1b726cfebe0a7acd2afa">min_left_side</a> (float *r)</td></tr>
<tr class="memdesc:ad45a8b389b8b1b726cfebe0a7acd2afa"><td class="mdescLeft">&#160;</td><td class="mdescRight">min_left_side function, used to obtain the minimum value of the left side ranges  <a href="navigation__controller_8cpp.html#ad45a8b389b8b1b726cfebe0a7acd2afa">More...</a><br /></td></tr>
<tr class="separator:ad45a8b389b8b1b726cfebe0a7acd2afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9bd59655df7fd46e1cb181794e4897d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#af9bd59655df7fd46e1cb181794e4897d">min_front_side</a> (float *r)</td></tr>
<tr class="memdesc:af9bd59655df7fd46e1cb181794e4897d"><td class="mdescLeft">&#160;</td><td class="mdescRight">min_front_side function, used to obtain the minimum value of the front side ranges  <a href="navigation__controller_8cpp.html#af9bd59655df7fd46e1cb181794e4897d">More...</a><br /></td></tr>
<tr class="separator:af9bd59655df7fd46e1cb181794e4897d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e739b03b075176d75141cb464e151b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a2e739b03b075176d75141cb464e151b2">avoid_walls</a> (float front, float left, float right)</td></tr>
<tr class="memdesc:a2e739b03b075176d75141cb464e151b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">avoid_walls function, used to avoid that the robot crashes on the walls of the environment  <a href="navigation__controller_8cpp.html#a2e739b03b075176d75141cb464e151b2">More...</a><br /></td></tr>
<tr class="separator:a2e739b03b075176d75141cb464e151b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c43c60aa1f08799d4154361b6749d90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a4c43c60aa1f08799d4154361b6749d90">drivingAssistance</a> (const sensor_msgs::LaserScan::ConstPtr &amp;msg)</td></tr>
<tr class="memdesc:a4c43c60aa1f08799d4154361b6749d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">drivingAssistance function, used to implement the driving assistance when the robot is in the assisted drive mode  <a href="navigation__controller_8cpp.html#a4c43c60aa1f08799d4154361b6749d90">More...</a><br /></td></tr>
<tr class="separator:a4c43c60aa1f08799d4154361b6749d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> (int argc, char **argv)</td></tr>
<tr class="memdesc:a3c04138a5bfe5d72780bb7e82a18e627"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function.  <a href="navigation__controller_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">More...</a><br /></td></tr>
<tr class="separator:a3c04138a5bfe5d72780bb7e82a18e627"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a87ffc14d6746aff1937d2819f359bc8f"><td class="memItemLeft" align="right" valign="top"><a id="a87ffc14d6746aff1937d2819f359bc8f"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a87ffc14d6746aff1937d2819f359bc8f">timeout</a> = 120000000</td></tr>
<tr class="memdesc:a87ffc14d6746aff1937d2819f359bc8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">timeout of 2 minutes <br /></td></tr>
<tr class="separator:a87ffc14d6746aff1937d2819f359bc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad97b05b88ce9080f35b157cfacc8eb69"><td class="memItemLeft" align="right" valign="top"><a id="ad97b05b88ce9080f35b157cfacc8eb69"></a>
string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad97b05b88ce9080f35b157cfacc8eb69">id</a> = &quot;&quot;</td></tr>
<tr class="memdesc:ad97b05b88ce9080f35b157cfacc8eb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">goal identifier <br /></td></tr>
<tr class="separator:ad97b05b88ce9080f35b157cfacc8eb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accabcd479bbf940d125f62cc4233f08e"><td class="memItemLeft" align="right" valign="top"><a id="accabcd479bbf940d125f62cc4233f08e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#accabcd479bbf940d125f62cc4233f08e">auto_mode</a> = false</td></tr>
<tr class="memdesc:accabcd479bbf940d125f62cc4233f08e"><td class="mdescLeft">&#160;</td><td class="mdescRight">auto drive mode flag <br /></td></tr>
<tr class="separator:accabcd479bbf940d125f62cc4233f08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3039562ceac7fca79eec81d1561b228"><td class="memItemLeft" align="right" valign="top"><a id="ac3039562ceac7fca79eec81d1561b228"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ac3039562ceac7fca79eec81d1561b228">manual</a> = false</td></tr>
<tr class="memdesc:ac3039562ceac7fca79eec81d1561b228"><td class="mdescLeft">&#160;</td><td class="mdescRight">manual drive mode flag <br /></td></tr>
<tr class="separator:ac3039562ceac7fca79eec81d1561b228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7d7d15ddf4beb964b0bcdd3af6e6ca"><td class="memItemLeft" align="right" valign="top"><a id="aba7d7d15ddf4beb964b0bcdd3af6e6ca"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#aba7d7d15ddf4beb964b0bcdd3af6e6ca">assisted</a> = false</td></tr>
<tr class="memdesc:aba7d7d15ddf4beb964b0bcdd3af6e6ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">assisted drive mode flag <br /></td></tr>
<tr class="separator:aba7d7d15ddf4beb964b0bcdd3af6e6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a341517a9f9acd233b7d2ecea1bf10f60"><td class="memItemLeft" align="right" valign="top"><a id="a341517a9f9acd233b7d2ecea1bf10f60"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a341517a9f9acd233b7d2ecea1bf10f60">canc</a> = false</td></tr>
<tr class="memdesc:a341517a9f9acd233b7d2ecea1bf10f60"><td class="mdescLeft">&#160;</td><td class="mdescRight">flag for cancelling the goal <br /></td></tr>
<tr class="separator:a341517a9f9acd233b7d2ecea1bf10f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94f98c123703f2950c9a529dd67ca5c5"><td class="memItemLeft" align="right" valign="top"><a id="a94f98c123703f2950c9a529dd67ca5c5"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a94f98c123703f2950c9a529dd67ca5c5">robot_x</a></td></tr>
<tr class="memdesc:a94f98c123703f2950c9a529dd67ca5c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">the x coordinate of the robot position <br /></td></tr>
<tr class="separator:a94f98c123703f2950c9a529dd67ca5c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad10724c6ea6f6012098ff6267f6ffb65"><td class="memItemLeft" align="right" valign="top"><a id="ad10724c6ea6f6012098ff6267f6ffb65"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad10724c6ea6f6012098ff6267f6ffb65">robot_y</a></td></tr>
<tr class="memdesc:ad10724c6ea6f6012098ff6267f6ffb65"><td class="mdescLeft">&#160;</td><td class="mdescRight">the y coordinate of the robot position <br /></td></tr>
<tr class="separator:ad10724c6ea6f6012098ff6267f6ffb65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fea51ae132b7d4cfa489cc41b148302"><td class="memItemLeft" align="right" valign="top"><a id="a4fea51ae132b7d4cfa489cc41b148302"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a4fea51ae132b7d4cfa489cc41b148302">e_x</a> = 100</td></tr>
<tr class="memdesc:a4fea51ae132b7d4cfa489cc41b148302"><td class="mdescLeft">&#160;</td><td class="mdescRight">the initialization of the x coordinate error <br /></td></tr>
<tr class="separator:a4fea51ae132b7d4cfa489cc41b148302"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf1ca1912bae7e38ade7b7e51ba9e742"><td class="memItemLeft" align="right" valign="top"><a id="abf1ca1912bae7e38ade7b7e51ba9e742"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#abf1ca1912bae7e38ade7b7e51ba9e742">e_y</a> = 100</td></tr>
<tr class="memdesc:abf1ca1912bae7e38ade7b7e51ba9e742"><td class="mdescLeft">&#160;</td><td class="mdescRight">the initialization of the y coordinate error <br /></td></tr>
<tr class="separator:abf1ca1912bae7e38ade7b7e51ba9e742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0df33c619e3c146b6f892ec65219336"><td class="memItemLeft" align="right" valign="top"><a id="ac0df33c619e3c146b6f892ec65219336"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ac0df33c619e3c146b6f892ec65219336">goal_x</a> = 0.0</td></tr>
<tr class="memdesc:ac0df33c619e3c146b6f892ec65219336"><td class="mdescLeft">&#160;</td><td class="mdescRight">the initialization of the goal position x coordinate <br /></td></tr>
<tr class="separator:ac0df33c619e3c146b6f892ec65219336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a424410ae6b4f43baca838da5f993b"><td class="memItemLeft" align="right" valign="top"><a id="a86a424410ae6b4f43baca838da5f993b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a86a424410ae6b4f43baca838da5f993b">goal_y</a> = 0.0</td></tr>
<tr class="memdesc:a86a424410ae6b4f43baca838da5f993b"><td class="mdescLeft">&#160;</td><td class="mdescRight">the initialization of the goal position y coordinate <br /></td></tr>
<tr class="separator:a86a424410ae6b4f43baca838da5f993b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a572390ae5a3e4d235b93352743702bb4"><td class="memItemLeft" align="right" valign="top"><a id="a572390ae5a3e4d235b93352743702bb4"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a572390ae5a3e4d235b93352743702bb4">goal_th</a> = 0.3</td></tr>
<tr class="memdesc:a572390ae5a3e4d235b93352743702bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">allowable position goal error threshold <br /></td></tr>
<tr class="separator:a572390ae5a3e4d235b93352743702bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22197de54c026ef97f0f99929418bb19"><td class="memItemLeft" align="right" valign="top"><a id="a22197de54c026ef97f0f99929418bb19"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a22197de54c026ef97f0f99929418bb19">pubVel</a></td></tr>
<tr class="memdesc:a22197de54c026ef97f0f99929418bb19"><td class="mdescLeft">&#160;</td><td class="mdescRight">the robot velocity publisher <br /></td></tr>
<tr class="separator:a22197de54c026ef97f0f99929418bb19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a309df6e106ea31e635c6bc3fac4fb835"><td class="memItemLeft" align="right" valign="top"><a id="a309df6e106ea31e635c6bc3fac4fb835"></a>
ros::Publisher&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a309df6e106ea31e635c6bc3fac4fb835">pubCanc</a></td></tr>
<tr class="memdesc:a309df6e106ea31e635c6bc3fac4fb835"><td class="mdescLeft">&#160;</td><td class="mdescRight">the goal cancellation publisher <br /></td></tr>
<tr class="separator:a309df6e106ea31e635c6bc3fac4fb835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad69671e3c10c68f874067b94df670d62"><td class="memItemLeft" align="right" valign="top"><a id="ad69671e3c10c68f874067b94df670d62"></a>
chrono::high_resolution_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad69671e3c10c68f874067b94df670d62">t_start</a></td></tr>
<tr class="memdesc:ad69671e3c10c68f874067b94df670d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">the starting time instant <br /></td></tr>
<tr class="separator:ad69671e3c10c68f874067b94df670d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c094c7564670963a5fa0a8c48d9df0"><td class="memItemLeft" align="right" valign="top"><a id="ad5c094c7564670963a5fa0a8c48d9df0"></a>
chrono::high_resolution_clock::time_point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad5c094c7564670963a5fa0a8c48d9df0">t_end</a></td></tr>
<tr class="memdesc:ad5c094c7564670963a5fa0a8c48d9df0"><td class="mdescLeft">&#160;</td><td class="mdescRight">the ending time instant <br /></td></tr>
<tr class="separator:ad5c094c7564670963a5fa0a8c48d9df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a087cd5236b3c060750c53df3e6f75011"><td class="memItemLeft" align="right" valign="top"><a id="a087cd5236b3c060750c53df3e6f75011"></a>
geometry_msgs::Twist&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a087cd5236b3c060750c53df3e6f75011">new_vel</a></td></tr>
<tr class="memdesc:a087cd5236b3c060750c53df3e6f75011"><td class="mdescLeft">&#160;</td><td class="mdescRight">new robot velocity to publish <br /></td></tr>
<tr class="separator:a087cd5236b3c060750c53df3e6f75011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da00e5a9819f3105d708f0fe015ccfd"><td class="memItemLeft" align="right" valign="top"><a id="a4da00e5a9819f3105d708f0fe015ccfd"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a4da00e5a9819f3105d708f0fe015ccfd">ranges</a> [720]</td></tr>
<tr class="memdesc:a4da00e5a9819f3105d708f0fe015ccfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">will contain all distances detected by the laser scan sensor (between 0 and 180 degrees). <br /></td></tr>
<tr class="separator:a4da00e5a9819f3105d708f0fe015ccfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0045c43141887d450a4c6308094bc07"><td class="memItemLeft" align="right" valign="top"><a id="ad0045c43141887d450a4c6308094bc07"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#ad0045c43141887d450a4c6308094bc07">right_side</a> [320]</td></tr>
<tr class="memdesc:ad0045c43141887d450a4c6308094bc07"><td class="mdescLeft">&#160;</td><td class="mdescRight">is a 'ranges' subsection, which contains all lateral distances between 0 and 80 degrees. <br /></td></tr>
<tr class="separator:ad0045c43141887d450a4c6308094bc07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a0d91858732bd19612dfb6fda8403b"><td class="memItemLeft" align="right" valign="top"><a id="af6a0d91858732bd19612dfb6fda8403b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#af6a0d91858732bd19612dfb6fda8403b">left_side</a> [320]</td></tr>
<tr class="memdesc:af6a0d91858732bd19612dfb6fda8403b"><td class="mdescLeft">&#160;</td><td class="mdescRight">is a 'ranges' subsection, which contains all lateral distances between 100 and 180 degrees. <br /></td></tr>
<tr class="separator:af6a0d91858732bd19612dfb6fda8403b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c073c1868107df0291189635b7cc2d9"><td class="memItemLeft" align="right" valign="top"><a id="a2c073c1868107df0291189635b7cc2d9"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a2c073c1868107df0291189635b7cc2d9">front_side</a> [80]</td></tr>
<tr class="memdesc:a2c073c1868107df0291189635b7cc2d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">is a 'ranges' subsection, which contains all frontal distances between 80 and 100 degrees. <br /></td></tr>
<tr class="separator:a2c073c1868107df0291189635b7cc2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a4aeea7841d065baa8fb5b1d05f95b"><td class="memItemLeft" align="right" valign="top"><a id="a29a4aeea7841d065baa8fb5b1d05f95b"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="navigation__controller_8cpp.html#a29a4aeea7841d065baa8fb5b1d05f95b">th</a> = 0.5</td></tr>
<tr class="memdesc:a29a4aeea7841d065baa8fb5b1d05f95b"><td class="mdescLeft">&#160;</td><td class="mdescRight">threshold which let us to consider a goal reached <br /></td></tr>
<tr class="separator:a29a4aeea7841d065baa8fb5b1d05f95b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>the node that implements all the drive modalities of the robot (and more) </p>
<dl class="section author"><dt>Author</dt><dd>Gabriele Russo </dd></dl>
<dl class="section date"><dt>Date</dt><dd>06/03/2022</dd></dl>
<p>Subscribes to:<br  />
</p>
<p>°/Velocity_control the remapped topic used to control the robot in the manual/assisted driving mode</p>
<p>°/move_base/feedback topic which contains the current robot position</p>
<p>°/scan topic which contains the output of the robot laser scan</p>
<p>Publishes to:<br  />
</p>
<p>°/cmd_vel in order to modify the robot velocity in the assisted driving mode</p>
<p>°/move_base/cancel in order to cancel the move base goal</p>
<p>Custom Services:<br  />
</p>
<p>°/goal_position custom server which receives the robot desired goal position from the user interface node</p>
<p>°/commands custom server which receives the user commands from the user interface node</p>
<p>Description:</p>
<p>This node receives from the user interface node the drive mode chosen by the user. There are three drive mode:</p>
<p>Auto drive mode: in this case the user insert a desired robot position, and the robot will try to reach the goal position (autonomously) using the move base action server</p>
<p>Manual drive mode: in this case the user will be able to control the robot using the teleop twist keyboard. Hence, the user will can drive manually the robot towards a desired position</p>
<p>Assisted drive mode: in this case the user can drive manually the robot, as in the manual drive mode, but in this case there will be an assisted drive mode that will avoid the walls (and the obstacle) autonomously, when the user drives the robot towards a wall. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2e739b03b075176d75141cb464e151b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e739b03b075176d75141cb464e151b2">&#9670;&nbsp;</a></span>avoid_walls()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void avoid_walls </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>front</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>avoid_walls function, used to avoid that the robot crashes on the walls of the environment </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">front</td><td>the minimum value of the front side ranges </td></tr>
    <tr><td class="paramname">left</td><td>the minimum value of the left side ranges </td></tr>
    <tr><td class="paramname">right</td><td>the minimum value of the right side ranges</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>avoid_walls is a function used to avoid that the robot crashes on the walls of the environment. It takes as input parameters the front, left and right minimum values, computed by the min_left_side, min_right_side amd min_front_side functions and using this values it checks if the robot crosses the threshold ,for instance, firstly it checks if the front min value is less than th, if it isn't ,the robot go on ,otherwise it checks if the left min is less than the right min and vice versa. If the left min is less than the right min it means that the nearest wall is on the left and so on. </p>

</div>
</div>
<a id="a4c43c60aa1f08799d4154361b6749d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c43c60aa1f08799d4154361b6749d90">&#9670;&nbsp;</a></span>drivingAssistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drivingAssistance </td>
          <td>(</td>
          <td class="paramtype">const sensor_msgs::LaserScan::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>drivingAssistance function, used to implement the driving assistance when the robot is in the assisted drive mode </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>laser scan data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>This function split the ranges data taken by the laser scan topic in three parts (front, left and right) and call the function avoid_walls passing it these three data parts. </p>

</div>
</div>
<a id="ac5fa93e2808e6e8c2f8fe38e53d413ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5fa93e2808e6e8c2f8fe38e53d413ed">&#9670;&nbsp;</a></span>goalPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool goalPosition </td>
          <td>(</td>
          <td class="paramtype">rt1_third_assignment::Goal::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rt1_third_assignment::Goal::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>goalPosition function, used to obtain the goal coordinates from the user interface </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>client request, the goal coordinates </td></tr>
    <tr><td class="paramname">res</td><td>server response, no response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true</dd></dl>
<p>This function is called when the custom server (server_goal) is called. It takes from the user interface node the coordinates of the desired goal position (choosen by the user) and using an action client it sends this coordinates to the MoveBase action server that will move the robot towards the desired goal position. </p>

</div>
</div>
<a id="aad501e885a00d79c0dfbf28112af8fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad501e885a00d79c0dfbf28112af8fd9">&#9670;&nbsp;</a></span>interface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool interface </td>
          <td>(</td>
          <td class="paramtype">rt1_third_assignment::Interface::Request &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rt1_third_assignment::Interface::Response &amp;&#160;</td>
          <td class="paramname"><em>res</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>interface function, used to compute the user commands </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">req</td><td>client reequest, the user commands </td></tr>
    <tr><td class="paramname">res</td><td>server response, no response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true</dd></dl>
<p>This function is called when the custom server (server_interface) is called. It takes from the user interface node the command, given by the user. For the auto, manual and assisted mode it sets the value of 3 boolean variable that are then used in the velCallback function to say if teleop can publish on teleop or not. Instead when the user wants to cancel the actual goal, it checks the id of the goal and publish on the move_base/cancel topic to cancel it. </p>

</div>
</div>
<a id="a3c04138a5bfe5d72780bb7e82a18e627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c04138a5bfe5d72780bb7e82a18e627">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>argv</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function. </p>

</div>
</div>
<a id="af9bd59655df7fd46e1cb181794e4897d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9bd59655df7fd46e1cb181794e4897d">&#9670;&nbsp;</a></span>min_front_side()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float min_front_side </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>min_front_side function, used to obtain the minimum value of the front side ranges </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>pointer to the ranges array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>min_f the minimum value of the front side ranges</dd></dl>
<p>min_front_side is a function that takes as input parameter the ranges array ,computes the minimum value among the frontal distances contained in the front_side array and returns the minimum value as output. </p>

</div>
</div>
<a id="ad45a8b389b8b1b726cfebe0a7acd2afa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad45a8b389b8b1b726cfebe0a7acd2afa">&#9670;&nbsp;</a></span>min_left_side()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float min_left_side </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>min_left_side function, used to obtain the minimum value of the left side ranges </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>pointer to the ranges array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>min_l the minimum value of the left side ranges</dd></dl>
<p>min_left_side is a function that takes as input parameter the ranges array ,computes the minimum value among the left lateral distances contained in the left_side array and returns the minimum value as output. </p>

</div>
</div>
<a id="a431f8bb04c3b06454f7b25bbebe2bed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a431f8bb04c3b06454f7b25bbebe2bed0">&#9670;&nbsp;</a></span>min_right_side()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float min_right_side </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>r</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>min_right_side function, used to obtain the minimum value of the right side ranges </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">r</td><td>pointer to the ranges array</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>min_r the minimum value of the right side ranges</dd></dl>
<p>min_right_side is a function that takes as input parameter the ranges array ,computes the minimum value among the right lateral distances contained in the right_side array and returns the minimum value as output. </p>

</div>
</div>
<a id="afb11b81a819b0870f89687f4708d1e2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb11b81a819b0870f89687f4708d1e2a">&#9670;&nbsp;</a></span>robotPosition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void robotPosition </td>
          <td>(</td>
          <td class="paramtype">const move_base_msgs::MoveBaseActionFeedback::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>robotPosition function, used to obtain the updated robot position </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>move base goal informations</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>This function is used to take the position of the robot during its motion using the move_base/feedback topic. So it takes the x and y coordinate of robot and compute the error distance between the actual position of the robot and the goal position. If the error distance is acceptable (i.e. lower than a goal threshold) then it takes the id of the goal, that is continuously updated, and cancel the the goal itself, using the topic /move_base/cancel, in order to say (in this case) that the goal is reached. Instead if the timeout is elapsed than the goal is cancelled beacause it is unreachable. </p>

</div>
</div>
<a id="a03814876eb117e8027ff880de6b63929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03814876eb117e8027ff880de6b63929">&#9670;&nbsp;</a></span>velCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void velCallback </td>
          <td>(</td>
          <td class="paramtype">const geometry_msgs::Twist::ConstPtr &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>velCallback function, executed each time a new robot velocity is published from teleop </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>robot velocity</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>
<p>This is the callback function of the topic Velocity_control where Teleop is remapped. Teleop is used only in the manual and assisted drive, so it can not always publish on the cmd_vel topic, for this teleop is remapped on the Velocity_control topic. In this way if the user uses teleop during the auto mode, it doesn't make effect on robot, becouse it publish on the Velocity_control topic that publish on the cmd_vel topic only in the manual and assisted mode. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
